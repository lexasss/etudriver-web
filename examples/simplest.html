<html>
<head>
    <title>Gaze tracking with ETU-Driver over WebSocket: simplest</title>
    <script type="text/javascript" src="../build/gazeTargets.js"></script>
    
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            var log = document.getElementById('log');
            
            GazeTargets.init({ mapping: { type: GazeTargets.mapping.types.reading, source: GazeTargets.mapping.sources.fixations }/* use only default settings */ }, {
                // callbacks
                target: function (event, target) {
                    log.innerHTML += '<div>' + event + ': ' + (target.textContent || target.innerText) + '</div>';
                },
                state: function (state) {
                    if (state.isConnected) {
                        document.getElementById('warning').classList.add('hidden');
                    }
                    if (state.isTracking) {
                        log.innerHTML = '';
                    }
                }
            });
        });
    </script>
    
    <style>
        body {
            background-color: #CCCCCC;
        }
        
        #warning {
            color: #DDDDDD;
            font: bold 26pt Arial, sans-serif;
            padding-top: 40pt;
            text-align: center;
            width: 100%;
        }
        
        .hidden {
            display: none;
        }
        
        #log {
            padding-left: 20px;
            position: absolute;
            left: 20px;
            top: 40px;
        }
       
        #log > div {
            margin: 6px;
        }
        
        .container {
            padding: 20px 0;
            width: 100%;
            text-align: center;
        }
       
        .container:after {
            content: '';
            display: inline-block;
            height: 90%;
            vertical-align: middle;
            width: 0;
        }
       
        .gt-target {
            display: inline-block;
            background-color: deepskyblue;
            margin: 20px 100px;
            width: 140px;
            height: 140px;
            
            border: 1px solid black;
            border-radius: 8px;
            text-align: center;
            font: 18pt arial, sans-serif;
            color: black;
            line-height: 140px;
            vertical-align: middle;
        }

        .gt-focused {
            background-color: tomato;
            color: white;
        }        

        .gt-selected {
            background-color: #CC4F39;
            color: white;
        }        
    </style>

</head>

<body>
    <div id="warning">You need the "ETU-Driver Service" application running <br> with "WebSocket server" flag set on</div>
    <div class="container">
        <div class="gt-target">left</div>
        <div class="gt-target">right</div>
    </div>
    <div id="log"></div>
</body>

</html>
